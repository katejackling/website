{"ast":null,"code":"import { useState, useCallback, useEffect, setGlobal } from \"reactn\"; // import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n  const rect = node.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: \"x\" in rect ? rect.x : rect.top,\n    left: \"y\" in rect ? rect.y : rect.left,\n    x: \"x\" in rect ? rect.x : rect.left,\n    y: \"y\" in rect ? rect.y : rect.top,\n    right: rect.right,\n    bottom: rect.bottom\n  };\n}\n\nfunction useDimensions(global) {\n  const [dimensions, setDimensions] = useState({});\n  const [node, setNode] = useState(null);\n  const ref = useCallback(node => {\n    setNode(node);\n  }, []);\n  useEffect(() => {\n    if (node) {\n      const measure = () => {\n        window.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n        console.log(node);\n        global && setGlobal({\n          [global]: dimensions\n        });\n      };\n\n      measure();\n      window.addEventListener(\"resize\", measure); // window.addEventListener(\"scroll\", measure);\n\n      return () => {\n        window.removeEventListener(\"resize\", measure); // window.removeEventListener(\"scroll\", measure);\n      };\n    }\n  }, [node]);\n  return [ref, dimensions, node];\n}\n\nexport default useDimensions;","map":{"version":3,"sources":["/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/utils/hooks/useDimensions.js"],"names":["useState","useCallback","useEffect","setGlobal","getDimensionObject","node","rect","getBoundingClientRect","width","height","top","x","left","y","right","bottom","useDimensions","global","dimensions","setDimensions","setNode","ref","measure","window","requestAnimationFrame","console","log","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,EAA2CC,SAA3C,QAA4D,QAA5D,C,CACA;;AAEA,SAASC,kBAAT,CAA4BC,IAA5B,EAAkC;AACjC,QAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAL,EAAb;AAEA,SAAO;AACNC,IAAAA,KAAK,EAAEF,IAAI,CAACE,KADN;AAENC,IAAAA,MAAM,EAAEH,IAAI,CAACG,MAFP;AAGNC,IAAAA,GAAG,EAAE,OAAOJ,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACI,GAH3B;AAINE,IAAAA,IAAI,EAAE,OAAON,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACM,IAJ5B;AAKND,IAAAA,CAAC,EAAE,OAAOL,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACM,IALzB;AAMNC,IAAAA,CAAC,EAAE,OAAOP,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACI,GANzB;AAONI,IAAAA,KAAK,EAAER,IAAI,CAACQ,KAPN;AAQNC,IAAAA,MAAM,EAAET,IAAI,CAACS;AARP,GAAP;AAUA;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC9B,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BnB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACK,IAAD,EAAOe,OAAP,IAAkBpB,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMqB,GAAG,GAAGpB,WAAW,CAACI,IAAI,IAAI;AAC/Be,IAAAA,OAAO,CAACf,IAAD,CAAP;AACA,GAFsB,EAEpB,EAFoB,CAAvB;AAIAH,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIG,IAAJ,EAAU;AACT,YAAMiB,OAAO,GAAG,MAAM;AACrBC,QAAAA,MAAM,CAACC,qBAAP,CAA6B,MAAML,aAAa,CAACf,kBAAkB,CAACC,IAAD,CAAnB,CAAhD;AACAoB,QAAAA,OAAO,CAACC,GAAR,CAAYrB,IAAZ;AACAY,QAAAA,MAAM,IAAId,SAAS,CAAC;AAAE,WAACc,MAAD,GAAUC;AAAZ,SAAD,CAAnB;AACA,OAJD;;AAMAI,MAAAA,OAAO;AAEPC,MAAAA,MAAM,CAACI,gBAAP,CAAwB,QAAxB,EAAkCL,OAAlC,EATS,CAUT;;AAEA,aAAO,MAAM;AACZC,QAAAA,MAAM,CAACK,mBAAP,CAA2B,QAA3B,EAAqCN,OAArC,EADY,CAEZ;AACA,OAHD;AAIA;AACD,GAlBQ,EAkBN,CAACjB,IAAD,CAlBM,CAAT;AAoBA,SAAO,CAACgB,GAAD,EAAMH,UAAN,EAAkBb,IAAlB,CAAP;AACA;;AAED,eAAeW,aAAf","sourcesContent":["import { useState, useCallback, useEffect, setGlobal } from \"reactn\";\n// import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n\tconst rect = node.getBoundingClientRect();\n\n\treturn {\n\t\twidth: rect.width,\n\t\theight: rect.height,\n\t\ttop: \"x\" in rect ? rect.x : rect.top,\n\t\tleft: \"y\" in rect ? rect.y : rect.left,\n\t\tx: \"x\" in rect ? rect.x : rect.left,\n\t\ty: \"y\" in rect ? rect.y : rect.top,\n\t\tright: rect.right,\n\t\tbottom: rect.bottom\n\t};\n}\n\nfunction useDimensions(global) {\n\tconst [dimensions, setDimensions] = useState({});\n\tconst [node, setNode] = useState(null);\n\n\tconst ref = useCallback(node => {\n\t\tsetNode(node);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (node) {\n\t\t\tconst measure = () => {\n\t\t\t\twindow.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n\t\t\t\tconsole.log(node);\n\t\t\t\tglobal && setGlobal({ [global]: dimensions });\n\t\t\t};\n\n\t\t\tmeasure();\n\n\t\t\twindow.addEventListener(\"resize\", measure);\n\t\t\t// window.addEventListener(\"scroll\", measure);\n\n\t\t\treturn () => {\n\t\t\t\twindow.removeEventListener(\"resize\", measure);\n\t\t\t\t// window.removeEventListener(\"scroll\", measure);\n\t\t\t};\n\t\t}\n\t}, [node]);\n\n\treturn [ref, dimensions, node];\n}\n\nexport default useDimensions;\n"]},"metadata":{},"sourceType":"module"}