{"ast":null,"code":"import { useState, useCallback, useEffect, setGlobal } from \"reactn\"; // import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n  const rect = node.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: \"x\" in rect ? rect.x : rect.top,\n    left: \"y\" in rect ? rect.y : rect.left,\n    x: \"x\" in rect ? rect.x : rect.left,\n    y: \"y\" in rect ? rect.y : rect.top,\n    right: rect.right,\n    bottom: rect.bottom\n  };\n}\n\nfunction useDimensions() {\n  const [dimensions, setDimensions] = useState({});\n  const [node, setNode] = useState(null);\n  const ref = useCallback(node => {\n    setNode(node);\n  }, []);\n  useEffect(() => {\n    if (node) {\n      const measure = () => {\n        window.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n        setGlobal({\n          headerHeigth: 44\n        });\n      };\n\n      measure();\n      window.addEventListener(\"resize\", measure); // window.addEventListener(\"scroll\", measure);\n\n      return () => {\n        window.removeEventListener(\"resize\", measure); // window.removeEventListener(\"scroll\", measure);\n      };\n    }\n  }, [node]);\n  return [ref, dimensions, node];\n}\n\nexport default useDimensions;","map":{"version":3,"sources":["/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/utils/hooks/useDimensions.js"],"names":["useState","useCallback","useEffect","setGlobal","getDimensionObject","node","rect","getBoundingClientRect","width","height","top","x","left","y","right","bottom","useDimensions","dimensions","setDimensions","setNode","ref","measure","window","requestAnimationFrame","headerHeigth","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,EAA2CC,SAA3C,QAA4D,QAA5D,C,CACA;;AAEA,SAASC,kBAAT,CAA4BC,IAA5B,EAAkC;AACjC,QAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAL,EAAb;AAEA,SAAO;AACNC,IAAAA,KAAK,EAAEF,IAAI,CAACE,KADN;AAENC,IAAAA,MAAM,EAAEH,IAAI,CAACG,MAFP;AAGNC,IAAAA,GAAG,EAAE,OAAOJ,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACI,GAH3B;AAINE,IAAAA,IAAI,EAAE,OAAON,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACM,IAJ5B;AAKND,IAAAA,CAAC,EAAE,OAAOL,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACM,IALzB;AAMNC,IAAAA,CAAC,EAAE,OAAOP,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACI,GANzB;AAONI,IAAAA,KAAK,EAAER,IAAI,CAACQ,KAPN;AAQNC,IAAAA,MAAM,EAAET,IAAI,CAACS;AARP,GAAP;AAUA;;AAED,SAASC,aAAT,GAAyB;AACxB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BlB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACK,IAAD,EAAOc,OAAP,IAAkBnB,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMoB,GAAG,GAAGnB,WAAW,CAACI,IAAI,IAAI;AAC/Bc,IAAAA,OAAO,CAACd,IAAD,CAAP;AACA,GAFsB,EAEpB,EAFoB,CAAvB;AAIAH,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIG,IAAJ,EAAU;AACT,YAAMgB,OAAO,GAAG,MAAM;AACrBC,QAAAA,MAAM,CAACC,qBAAP,CAA6B,MAAML,aAAa,CAACd,kBAAkB,CAACC,IAAD,CAAnB,CAAhD;AACAF,QAAAA,SAAS,CAAC;AAAEqB,UAAAA,YAAY,EAAE;AAAhB,SAAD,CAAT;AACA,OAHD;;AAKAH,MAAAA,OAAO;AAEPC,MAAAA,MAAM,CAACG,gBAAP,CAAwB,QAAxB,EAAkCJ,OAAlC,EARS,CAST;;AAEA,aAAO,MAAM;AACZC,QAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCL,OAArC,EADY,CAEZ;AACA,OAHD;AAIA;AACD,GAjBQ,EAiBN,CAAChB,IAAD,CAjBM,CAAT;AAmBA,SAAO,CAACe,GAAD,EAAMH,UAAN,EAAkBZ,IAAlB,CAAP;AACA;;AAED,eAAeW,aAAf","sourcesContent":["import { useState, useCallback, useEffect, setGlobal } from \"reactn\";\n// import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n\tconst rect = node.getBoundingClientRect();\n\n\treturn {\n\t\twidth: rect.width,\n\t\theight: rect.height,\n\t\ttop: \"x\" in rect ? rect.x : rect.top,\n\t\tleft: \"y\" in rect ? rect.y : rect.left,\n\t\tx: \"x\" in rect ? rect.x : rect.left,\n\t\ty: \"y\" in rect ? rect.y : rect.top,\n\t\tright: rect.right,\n\t\tbottom: rect.bottom\n\t};\n}\n\nfunction useDimensions() {\n\tconst [dimensions, setDimensions] = useState({});\n\tconst [node, setNode] = useState(null);\n\n\tconst ref = useCallback(node => {\n\t\tsetNode(node);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (node) {\n\t\t\tconst measure = () => {\n\t\t\t\twindow.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n\t\t\t\tsetGlobal({ headerHeigth: 44 });\n\t\t\t};\n\n\t\t\tmeasure();\n\n\t\t\twindow.addEventListener(\"resize\", measure);\n\t\t\t// window.addEventListener(\"scroll\", measure);\n\n\t\t\treturn () => {\n\t\t\t\twindow.removeEventListener(\"resize\", measure);\n\t\t\t\t// window.removeEventListener(\"scroll\", measure);\n\t\t\t};\n\t\t}\n\t}, [node]);\n\n\treturn [ref, dimensions, node];\n}\n\nexport default useDimensions;\n"]},"metadata":{},"sourceType":"module"}