{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/components/Video.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport client from \"../client\";\nimport ReactPlayer from \"react-player\";\nimport SVG from \"react-inlinesvg\"; // Using extension .svgz to avoid svgr loader in webpack\n\nimport iconPlay from \"../static/ui/play.svg\";\nimport iconPause from \"../static/ui/pause.svg\";\n\nvar Video =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Video, _React$Component);\n\n  function Video() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Video);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Video)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      video: \"\",\n      playing: !_this.props.controls,\n      controls: _this.props.controls\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePlayPause\", function () {\n      _this.setState({\n        playing: !_this.state.playing\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Video, [{\n    key: \"componentDidMount\",\n    //videoRef = React.createRef();\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      client.fetch(\"*[_id == \\\"\".concat(this.props.asset._ref, \"\\\"][0]\")).then(function (video) {\n        return _this2.setState({\n          video: video\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          video = _this$state.video,\n          playing = _this$state.playing,\n          controls = _this$state.controls;\n      if (!video) return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, \"Loading...\");\n      var playbackId = video.playbackId,\n          data = video.data;\n\n      var width = _parseInt(data.aspect_ratio.split(\":\")[0]),\n          height = _parseInt(data.aspect_ratio.split(\":\")[1]),\n          aspectRatio = width / height;\n\n      if (this.props.gif) {\n        return __jsx(\"img\", {\n          className: \"lazyload\",\n          src: \"data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'  width%3D'\".concat(width, \"' height%3D'\").concat(height, \"' viewBox%3D'0 0 \").concat(width, \" \").concat(height, \"'%2F%3E\\\"\"),\n          \"data-src\": \"https://image.mux.com/\".concat(playbackId, \"/animated.gif?end=2.5\"),\n          sizes: \"auto\",\n          \"data-orientation\": aspectRatio < 1 ? \"portrait\" : \"landscape\",\n          style: {\n            \"--imgRatio\": aspectRatio\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        });\n      }\n\n      return __jsx(React.Fragment, null, __jsx(ReactPlayer, {\n        onClick: this.handlePlayPause,\n        \"data-playing\": playing,\n        \"data-orientation\": aspectRatio < 1 ? \"portrait\" : \"landscape\",\n        width: \"\",\n        height: \"\",\n        playsinline: !controls,\n        playing: playing,\n        loop: true,\n        muted: controls,\n        className: \"player__wrapper\",\n        config: {\n          file: {\n            forceHLS: true,\n            attributes: {\n              style: {}\n            }\n          }\n        },\n        style: {\n          \"--ratio\": aspectRatio\n        },\n        url: \"https://stream.mux.com/\".concat(playbackId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }), controls && __jsx(\"button\", {\n        onClick: this.handlePlayPause,\n        className: \"jsx-1653068194\" + \" \" + \"btn__toggle--play\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, __jsx(SVG, {\n        src: playing ? iconPause : iconPlay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), __jsx(_JSXStyle, {\n        id: \"1653068194\",\n        __self: this\n      }, \".btn__toggle--play{position:absolute;top:calc(50% - 1.5rem);left:50%;width:auto;height:3rem;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:-webkit-transform 0.1s,opacity 0.6s;-webkit-transition:transform 0.1s,opacity 0.6s;transition:transform 0.1s,opacity 0.6s;z-index:88;opacity:0.8;}[data-playing=\\\"true\\\"]:not(:hover)+.btn__toggle--play:not(:hover){opacity:0;}.btn__toggle--play:hover{-webkit-transform:scale(1.1) translateX(-50%);-ms-transform:scale(1.1) translateX(-50%);transform:scale(1.1) translateX(-50%);opacity:1;}.btn__toggle--play>svg{width:auto;height:100%;display:block;}svg:not(:root ){width:auto;height:100%;}@media screen and (max-width:639px){}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waGlsaXBwcG9sZGVyL0Ryb3Bib3gvUHJvamVrdGUvS2F0ZSBKYWNrbGluZy9Mb2NhbCBSb290L2thdGUtamFja2xpbmcvd2ViL2NvbXBvbmVudHMvVmlkZW8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkV1QixBQUd5QixBQVlSLEFBSTRCLEFBSzNCLEFBTUEsVUFkWixDQVNhLEFBTUEsT0EzQlcsS0FzQlQsQUFNZixjQUxBLElBdEJVLFNBQ0UsV0FDQyxZQUNlLHFEQVlqQixVQUNYLDhCQVp5Qyw2SUFDN0IsV0FDQyxZQUNiIiwiZmlsZSI6Ii9Vc2Vycy9waGlsaXBwcG9sZGVyL0Ryb3Bib3gvUHJvamVrdGUvS2F0ZSBKYWNrbGluZy9Mb2NhbCBSb290L2thdGUtamFja2xpbmcvd2ViL2NvbXBvbmVudHMvVmlkZW8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xpZW50IGZyb20gXCIuLi9jbGllbnRcIjtcbmltcG9ydCBSZWFjdFBsYXllciBmcm9tIFwicmVhY3QtcGxheWVyXCI7XG5pbXBvcnQgU1ZHIGZyb20gXCJyZWFjdC1pbmxpbmVzdmdcIjtcblxuLy8gVXNpbmcgZXh0ZW5zaW9uIC5zdmd6IHRvIGF2b2lkIHN2Z3IgbG9hZGVyIGluIHdlYnBhY2tcbmltcG9ydCBpY29uUGxheSBmcm9tIFwiLi4vc3RhdGljL3VpL3BsYXkuc3ZnXCI7XG5pbXBvcnQgaWNvblBhdXNlIGZyb20gXCIuLi9zdGF0aWMvdWkvcGF1c2Uuc3ZnXCI7XG5cbmNsYXNzIFZpZGVvIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblx0c3RhdGUgPSB7XG5cdFx0dmlkZW86IFwiXCIsXG5cdFx0cGxheWluZzogIXRoaXMucHJvcHMuY29udHJvbHMsXG5cdFx0Y29udHJvbHM6IHRoaXMucHJvcHMuY29udHJvbHNcblx0fTtcblxuXHQvL3ZpZGVvUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG5cblx0Y29tcG9uZW50RGlkTW91bnQoKSB7XG5cdFx0Y2xpZW50XG5cdFx0XHQuZmV0Y2goYCpbX2lkID09IFwiJHt0aGlzLnByb3BzLmFzc2V0Ll9yZWZ9XCJdWzBdYClcblx0XHRcdC50aGVuKHZpZGVvID0+IHRoaXMuc2V0U3RhdGUoeyB2aWRlbyB9KSk7XG5cdH1cblxuXHRoYW5kbGVQbGF5UGF1c2UgPSAoKSA9PiB7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7IHBsYXlpbmc6ICF0aGlzLnN0YXRlLnBsYXlpbmcgfSk7XG5cdH07XG5cblx0cmVuZGVyKCkge1xuXHRcdGNvbnN0IHsgdmlkZW8sIHBsYXlpbmcsIGNvbnRyb2xzIH0gPSB0aGlzLnN0YXRlO1xuXHRcdGlmICghdmlkZW8pIHJldHVybiA8ZGl2PkxvYWRpbmcuLi48L2Rpdj47XG5cblx0XHRjb25zdCB7IHBsYXliYWNrSWQsIGRhdGEgfSA9IHZpZGVvO1xuXHRcdGNvbnN0IHdpZHRoID0gcGFyc2VJbnQoZGF0YS5hc3BlY3RfcmF0aW8uc3BsaXQoXCI6XCIpWzBdKSxcblx0XHRcdGhlaWdodCA9IHBhcnNlSW50KGRhdGEuYXNwZWN0X3JhdGlvLnNwbGl0KFwiOlwiKVsxXSksXG5cdFx0XHRhc3BlY3RSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuXG5cdFx0aWYgKHRoaXMucHJvcHMuZ2lmKSB7XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHQ8aW1nXG5cdFx0XHRcdFx0Y2xhc3NOYW1lPVwibGF6eWxvYWRcIlxuXHRcdFx0XHRcdHNyYz17YGRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucyUzRCdodHRwJTNBJTJGJTJGd3d3LnczLm9yZyUyRjIwMDAlMkZzdmcnICB3aWR0aCUzRCcke3dpZHRofScgaGVpZ2h0JTNEJyR7aGVpZ2h0fScgdmlld0JveCUzRCcwIDAgJHt3aWR0aH0gJHtoZWlnaHR9JyUyRiUzRVwiYH1cblx0XHRcdFx0XHRkYXRhLXNyYz17YGh0dHBzOi8vaW1hZ2UubXV4LmNvbS8ke3BsYXliYWNrSWR9L2FuaW1hdGVkLmdpZj9lbmQ9Mi41YH1cblx0XHRcdFx0XHRzaXplcz1cImF1dG9cIlxuXHRcdFx0XHRcdGRhdGEtb3JpZW50YXRpb249e2FzcGVjdFJhdGlvIDwgMSA/IFwicG9ydHJhaXRcIiA6IFwibGFuZHNjYXBlXCJ9XG5cdFx0XHRcdFx0c3R5bGU9e3sgXCItLWltZ1JhdGlvXCI6IGFzcGVjdFJhdGlvIH19XG5cdFx0XHRcdC8+XG5cdFx0XHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gKFxuXHRcdFx0PD5cblx0XHRcdFx0PFJlYWN0UGxheWVyXG5cdFx0XHRcdFx0b25DbGljaz17dGhpcy5oYW5kbGVQbGF5UGF1c2V9XG5cdFx0XHRcdFx0ZGF0YS1wbGF5aW5nPXtwbGF5aW5nfVxuXHRcdFx0XHRcdGRhdGEtb3JpZW50YXRpb249e2FzcGVjdFJhdGlvIDwgMSA/IFwicG9ydHJhaXRcIiA6IFwibGFuZHNjYXBlXCJ9XG5cdFx0XHRcdFx0d2lkdGg9XCJcIlxuXHRcdFx0XHRcdGhlaWdodD1cIlwiXG5cdFx0XHRcdFx0cGxheXNpbmxpbmU9eyFjb250cm9sc31cblx0XHRcdFx0XHRwbGF5aW5nPXtwbGF5aW5nfVxuXHRcdFx0XHRcdGxvb3Bcblx0XHRcdFx0XHRtdXRlZD17Y29udHJvbHN9XG5cdFx0XHRcdFx0Y2xhc3NOYW1lPVwicGxheWVyX193cmFwcGVyXCJcblx0XHRcdFx0XHRjb25maWc9e3tcblx0XHRcdFx0XHRcdGZpbGU6IHtcblx0XHRcdFx0XHRcdFx0Zm9yY2VITFM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGF0dHJpYnV0ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRzdHlsZToge31cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH19XG5cdFx0XHRcdFx0c3R5bGU9e3sgXCItLXJhdGlvXCI6IGFzcGVjdFJhdGlvIH19XG5cdFx0XHRcdFx0dXJsPXtgaHR0cHM6Ly9zdHJlYW0ubXV4LmNvbS8ke3BsYXliYWNrSWR9YH1cblx0XHRcdFx0Lz5cblx0XHRcdFx0e2NvbnRyb2xzICYmIChcblx0XHRcdFx0XHQ8YnV0dG9uIGNsYXNzTmFtZT1cImJ0bl9fdG9nZ2xlLS1wbGF5XCIgb25DbGljaz17dGhpcy5oYW5kbGVQbGF5UGF1c2V9PlxuXHRcdFx0XHRcdFx0PFNWRyBzcmM9e3BsYXlpbmcgPyBpY29uUGF1c2UgOiBpY29uUGxheX0gLz5cblx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0KX1cblx0XHRcdFx0PHN0eWxlIGpzeCBnbG9iYWw+e2Bcblx0XHRcdFx0XHQuYnRuX190b2dnbGUtLXBsYXkge1xuXHRcdFx0XHRcdFx0cG9zaXRpb246IGFic29sdXRlO1xuXHRcdFx0XHRcdFx0dG9wOiBjYWxjKDUwJSAtIDEuNXJlbSk7XG5cdFx0XHRcdFx0XHRsZWZ0OiA1MCU7XG5cdFx0XHRcdFx0XHR3aWR0aDogYXV0bztcblx0XHRcdFx0XHRcdGhlaWdodDogM3JlbTtcblx0XHRcdFx0XHRcdHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcblx0XHRcdFx0XHRcdHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzLCBvcGFjaXR5IDAuNnM7XG5cdFx0XHRcdFx0XHR6LWluZGV4OiA4ODtcblx0XHRcdFx0XHRcdG9wYWNpdHk6IDAuODtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRbZGF0YS1wbGF5aW5nPVwidHJ1ZVwiXTpub3QoOmhvdmVyKSArIC5idG5fX3RvZ2dsZS0tcGxheTpub3QoOmhvdmVyKSB7XG5cdFx0XHRcdFx0XHRvcGFjaXR5OiAwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC5idG5fX3RvZ2dsZS0tcGxheTpob3ZlciB7XG5cdFx0XHRcdFx0XHR0cmFuc2Zvcm06IHNjYWxlKDEuMSkgdHJhbnNsYXRlWCgtNTAlKTtcblx0XHRcdFx0XHRcdG9wYWNpdHk6IDE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LmJ0bl9fdG9nZ2xlLS1wbGF5ID4gc3ZnIHtcblx0XHRcdFx0XHRcdHdpZHRoOiBhdXRvO1xuXHRcdFx0XHRcdFx0aGVpZ2h0OiAxMDAlO1xuXHRcdFx0XHRcdFx0ZGlzcGxheTogYmxvY2s7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0c3ZnOm5vdCAoOnJvb3QgKSB7XG5cdFx0XHRcdFx0XHR3aWR0aDogYXV0bztcblx0XHRcdFx0XHRcdGhlaWdodDogMTAwJTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MzlweCkge1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0YH08L3N0eWxlPlxuXHRcdFx0PC8+XG5cdFx0KTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBWaWRlbztcbiJdfQ== */\\n/*@ sourceURL=/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/components/Video.js */\"));\n    }\n  }]);\n\n  return Video;\n}(React.Component);\n\nexport default Video;","map":{"version":3,"sources":["/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/components/Video.js"],"names":["client","ReactPlayer","SVG","iconPlay","iconPause","Video","video","playing","props","controls","setState","state","fetch","asset","_ref","then","playbackId","data","width","aspect_ratio","split","height","aspectRatio","gif","handlePlayPause","file","forceHLS","attributes","style","React","Component"],"mappings":"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","sourcesContent":["import client from \"../client\";\nimport ReactPlayer from \"react-player\";\nimport SVG from \"react-inlinesvg\";\n\n// Using extension .svgz to avoid svgr loader in webpack\nimport iconPlay from \"../static/ui/play.svg\";\nimport iconPause from \"../static/ui/pause.svg\";\n\nclass Video extends React.Component {\n\tstate = {\n\t\tvideo: \"\",\n\t\tplaying: !this.props.controls,\n\t\tcontrols: this.props.controls\n\t};\n\n\t//videoRef = React.createRef();\n\n\tcomponentDidMount() {\n\t\tclient\n\t\t\t.fetch(`*[_id == \"${this.props.asset._ref}\"][0]`)\n\t\t\t.then(video => this.setState({ video }));\n\t}\n\n\thandlePlayPause = () => {\n\t\tthis.setState({ playing: !this.state.playing });\n\t};\n\n\trender() {\n\t\tconst { video, playing, controls } = this.state;\n\t\tif (!video) return <div>Loading...</div>;\n\n\t\tconst { playbackId, data } = video;\n\t\tconst width = parseInt(data.aspect_ratio.split(\":\")[0]),\n\t\t\theight = parseInt(data.aspect_ratio.split(\":\")[1]),\n\t\t\taspectRatio = width / height;\n\n\t\tif (this.props.gif) {\n\t\t\treturn (\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"lazyload\"\n\t\t\t\t\tsrc={`data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'  width%3D'${width}' height%3D'${height}' viewBox%3D'0 0 ${width} ${height}'%2F%3E\"`}\n\t\t\t\t\tdata-src={`https://image.mux.com/${playbackId}/animated.gif?end=2.5`}\n\t\t\t\t\tsizes=\"auto\"\n\t\t\t\t\tdata-orientation={aspectRatio < 1 ? \"portrait\" : \"landscape\"}\n\t\t\t\t\tstyle={{ \"--imgRatio\": aspectRatio }}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ReactPlayer\n\t\t\t\t\tonClick={this.handlePlayPause}\n\t\t\t\t\tdata-playing={playing}\n\t\t\t\t\tdata-orientation={aspectRatio < 1 ? \"portrait\" : \"landscape\"}\n\t\t\t\t\twidth=\"\"\n\t\t\t\t\theight=\"\"\n\t\t\t\t\tplaysinline={!controls}\n\t\t\t\t\tplaying={playing}\n\t\t\t\t\tloop\n\t\t\t\t\tmuted={controls}\n\t\t\t\t\tclassName=\"player__wrapper\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tfile: {\n\t\t\t\t\t\t\tforceHLS: true,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tstyle: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ \"--ratio\": aspectRatio }}\n\t\t\t\t\turl={`https://stream.mux.com/${playbackId}`}\n\t\t\t\t/>\n\t\t\t\t{controls && (\n\t\t\t\t\t<button className=\"btn__toggle--play\" onClick={this.handlePlayPause}>\n\t\t\t\t\t\t<SVG src={playing ? iconPause : iconPlay} />\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t<style jsx global>{`\n\t\t\t\t\t.btn__toggle--play {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: calc(50% - 1.5rem);\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\twidth: auto;\n\t\t\t\t\t\theight: 3rem;\n\t\t\t\t\t\ttransform: translateX(-50%);\n\t\t\t\t\t\ttransition: transform 0.1s, opacity 0.6s;\n\t\t\t\t\t\tz-index: 88;\n\t\t\t\t\t\topacity: 0.8;\n\t\t\t\t\t}\n\n\t\t\t\t\t[data-playing=\"true\"]:not(:hover) + .btn__toggle--play:not(:hover) {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t.btn__toggle--play:hover {\n\t\t\t\t\t\ttransform: scale(1.1) translateX(-50%);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t.btn__toggle--play > svg {\n\t\t\t\t\t\twidth: auto;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\n\t\t\t\t\tsvg:not (:root ) {\n\t\t\t\t\t\twidth: auto;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t}\n\n\t\t\t\t\t@media screen and (max-width: 639px) {\n\t\t\t\t\t}\n\t\t\t\t`}</style>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Video;\n"]},"metadata":{},"sourceType":"module"}