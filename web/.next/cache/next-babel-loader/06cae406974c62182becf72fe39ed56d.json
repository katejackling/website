{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/components/Img.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport client from \"../client\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport lazySizes from \"lazysizes\";\nimport \"lazysizes/plugins/attrchange/ls.attrchange\";\n\nclass Img extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      dimensions: []\n    });\n  }\n\n  componentDidMount() {\n    return client.fetch(`*[_id == \"${this.props.asset._ref}\"][0].metadata.dimensions`).then(dimensions => {\n      this.setState({\n        dimensions: dimensions\n      });\n    });\n  }\n\n  render() {\n    const {\n      aspectRatio = \"\",\n      height = \"\",\n      width = \"\"\n    } = this.state.dimensions;\n    const builder = imageUrlBuilder(client);\n    const sizes = [120, 240, 360, 480, 600, 840, 1080, 1320, 1560, 1800, 2040, 2280, 2520, 2760, 3000];\n    const {\n      alt,\n      asset,\n      fit\n    } = this.props;\n    const objFit = fit ? fit : \"none\";\n    const sizeURLs = sizes.map(function (size) {\n      return `${builder.image(asset).auto(\"format\").width(size).fit(\"max\").url()} ${size}w`;\n    });\n    const srcSet = sizeURLs.reduce(function (prev, curr, i) {\n      return i == 0 ? curr : prev + \", \" + curr;\n    }, \"\");\n    return __jsx(\"img\", {\n      draggable: \"false\",\n      className: \"lazyload\",\n      src: `data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'  width%3D'${width}' height%3D'${height}' viewBox%3D'0 0 ${width} ${height}'%2F%3E\"`,\n      \"data-srcset\": srcSet,\n      sizes: \"auto\",\n      \"data-orientation\": aspectRatio < 1 ? \"portrait\" : \"landscape\",\n      style: {\n        \"--imgRatio\": aspectRatio,\n        \"--objFit\": objFit\n      },\n      alt: alt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Img;","map":{"version":3,"sources":["/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/components/Img.js"],"names":["client","imageUrlBuilder","lazySizes","Img","React","Component","dimensions","componentDidMount","fetch","props","asset","_ref","then","setState","render","aspectRatio","height","width","state","builder","sizes","alt","fit","objFit","sizeURLs","map","size","image","auto","url","srcSet","reduce","prev","curr","i"],"mappings":";;;;AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,4CAAP;;AAEA,MAAMC,GAAN,SAAkBC,KAAK,CAACC,SAAxB,CAAkC;AAAA;AAAA;;AAAA,mCACzB;AAAEC,MAAAA,UAAU,EAAE;AAAd,KADyB;AAAA;;AAGjCC,EAAAA,iBAAiB,GAAG;AACnB,WAAOP,MAAM,CACXQ,KADK,CACE,aAAY,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,IAAK,2BADpC,EAELC,IAFK,CAEAN,UAAU,IAAI;AACnB,WAAKO,QAAL,CAAc;AAAEP,QAAAA,UAAU,EAAEA;AAAd,OAAd;AACA,KAJK,CAAP;AAKA;;AAEDQ,EAAAA,MAAM,GAAG;AACR,UAAM;AAAEC,MAAAA,WAAW,GAAG,EAAhB;AAAoBC,MAAAA,MAAM,GAAG,EAA7B;AAAiCC,MAAAA,KAAK,GAAG;AAAzC,QAAgD,KAAKC,KAAL,CAAWZ,UAAjE;AACA,UAAMa,OAAO,GAAGlB,eAAe,CAACD,MAAD,CAA/B;AACA,UAAMoB,KAAK,GAAG,CACb,GADa,EAEb,GAFa,EAGb,GAHa,EAIb,GAJa,EAKb,GALa,EAMb,GANa,EAOb,IAPa,EAQb,IARa,EASb,IATa,EAUb,IAVa,EAWb,IAXa,EAYb,IAZa,EAab,IAba,EAcb,IAda,EAeb,IAfa,CAAd;AAiBA,UAAM;AAAEC,MAAAA,GAAF;AAAOX,MAAAA,KAAP;AAAcY,MAAAA;AAAd,QAAsB,KAAKb,KAAjC;AAEA,UAAMc,MAAM,GAAGD,GAAG,GAAGA,GAAH,GAAS,MAA3B;AAEA,UAAME,QAAQ,GAAGJ,KAAK,CAACK,GAAN,CAAU,UAASC,IAAT,EAAe;AACzC,aAAQ,GAAEP,OAAO,CACfQ,KADQ,CACFjB,KADE,EAERkB,IAFQ,CAEH,QAFG,EAGRX,KAHQ,CAGFS,IAHE,EAIRJ,GAJQ,CAIJ,KAJI,EAKRO,GALQ,EAKF,IAAGH,IAAK,GALhB;AAMA,KAPgB,CAAjB;AASA,UAAMI,MAAM,GAAGN,QAAQ,CAACO,MAAT,CAAgB,UAASC,IAAT,EAAeC,IAAf,EAAqBC,CAArB,EAAwB;AACtD,aAAOA,CAAC,IAAI,CAAL,GAASD,IAAT,GAAgBD,IAAI,GAAG,IAAP,GAAcC,IAArC;AACA,KAFc,EAEZ,EAFY,CAAf;AAIA,WACC;AACC,MAAA,SAAS,EAAC,OADX;AAEC,MAAA,SAAS,EAAC,UAFX;AAGC,MAAA,GAAG,EAAG,oGAAmGhB,KAAM,eAAcD,MAAO,oBAAmBC,KAAM,IAAGD,MAAO,UAHxK;AAIC,qBAAac,MAJd;AAKC,MAAA,KAAK,EAAC,MALP;AAMC,0BAAkBf,WAAW,GAAG,CAAd,GAAkB,UAAlB,GAA+B,WANlD;AAOC,MAAA,KAAK,EAAE;AAAE,sBAAcA,WAAhB;AAA6B,oBAAYQ;AAAzC,OAPR;AAQC,MAAA,GAAG,EAAEF,GARN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD;AAYA;;AA5DgC;;AA+DlC,eAAelB,GAAf","sourcesContent":["import client from \"../client\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport lazySizes from \"lazysizes\";\nimport \"lazysizes/plugins/attrchange/ls.attrchange\";\n\nclass Img extends React.Component {\n\tstate = { dimensions: [] };\n\n\tcomponentDidMount() {\n\t\treturn client\n\t\t\t.fetch(`*[_id == \"${this.props.asset._ref}\"][0].metadata.dimensions`)\n\t\t\t.then(dimensions => {\n\t\t\t\tthis.setState({ dimensions: dimensions });\n\t\t\t});\n\t}\n\n\trender() {\n\t\tconst { aspectRatio = \"\", height = \"\", width = \"\" } = this.state.dimensions;\n\t\tconst builder = imageUrlBuilder(client);\n\t\tconst sizes = [\n\t\t\t120,\n\t\t\t240,\n\t\t\t360,\n\t\t\t480,\n\t\t\t600,\n\t\t\t840,\n\t\t\t1080,\n\t\t\t1320,\n\t\t\t1560,\n\t\t\t1800,\n\t\t\t2040,\n\t\t\t2280,\n\t\t\t2520,\n\t\t\t2760,\n\t\t\t3000\n\t\t];\n\t\tconst { alt, asset, fit } = this.props;\n\n\t\tconst objFit = fit ? fit : \"none\";\n\n\t\tconst sizeURLs = sizes.map(function(size) {\n\t\t\treturn `${builder\n\t\t\t\t.image(asset)\n\t\t\t\t.auto(\"format\")\n\t\t\t\t.width(size)\n\t\t\t\t.fit(\"max\")\n\t\t\t\t.url()} ${size}w`;\n\t\t});\n\n\t\tconst srcSet = sizeURLs.reduce(function(prev, curr, i) {\n\t\t\treturn i == 0 ? curr : prev + \", \" + curr;\n\t\t}, \"\");\n\n\t\treturn (\n\t\t\t<img\n\t\t\t\tdraggable=\"false\"\n\t\t\t\tclassName=\"lazyload\"\n\t\t\t\tsrc={`data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'  width%3D'${width}' height%3D'${height}' viewBox%3D'0 0 ${width} ${height}'%2F%3E\"`}\n\t\t\t\tdata-srcset={srcSet}\n\t\t\t\tsizes=\"auto\"\n\t\t\t\tdata-orientation={aspectRatio < 1 ? \"portrait\" : \"landscape\"}\n\t\t\t\tstyle={{ \"--imgRatio\": aspectRatio, \"--objFit\": objFit }}\n\t\t\t\talt={alt}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Img;\n"]},"metadata":{},"sourceType":"module"}