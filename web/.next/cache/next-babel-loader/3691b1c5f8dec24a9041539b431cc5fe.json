{"ast":null,"code":"import { useState, useCallback, useLayoutEffect } from \"react\"; // import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n  const rect = node.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: \"x\" in rect ? rect.x : rect.top,\n    left: \"y\" in rect ? rect.y : rect.left,\n    x: \"x\" in rect ? rect.x : rect.left,\n    y: \"y\" in rect ? rect.y : rect.top,\n    right: rect.right,\n    bottom: rect.bottom\n  };\n}\n\nfunction useDimensions() {\n  const {\n    0: dimensions,\n    1: setDimensions\n  } = useState({});\n  const {\n    0: node,\n    1: setNode\n  } = useState(null);\n  const ref = useCallback(node => {\n    setNode(node);\n  }, []);\n  useLayoutEffect(() => {\n    if (node) {\n      const measure = () => window.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n\n      measure();\n\n      if (liveMeasure) {\n        window.addEventListener(\"resize\", measure); // window.addEventListener(\"scroll\", measure);\n\n        return () => {\n          window.removeEventListener(\"resize\", measure); // window.removeEventListener(\"scroll\", measure);\n        };\n      }\n    }\n  }, [node]);\n  return [ref, dimensions, node];\n}\n\nexport default useDimensions;","map":{"version":3,"sources":["/Users/philipppolder/Dropbox/Projekte/Kate Jackling/Local Root/kate-jackling/web/utils/hooks/useDimensions.js"],"names":["useState","useCallback","useLayoutEffect","getDimensionObject","node","rect","getBoundingClientRect","width","height","top","x","left","y","right","bottom","useDimensions","dimensions","setDimensions","setNode","ref","measure","window","requestAnimationFrame","liveMeasure","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,eAAhC,QAAuD,OAAvD,C,CACA;;AAEA,SAASC,kBAAT,CAA4BC,IAA5B,EAAkC;AACjC,QAAMC,IAAI,GAAGD,IAAI,CAACE,qBAAL,EAAb;AAEA,SAAO;AACNC,IAAAA,KAAK,EAAEF,IAAI,CAACE,KADN;AAENC,IAAAA,MAAM,EAAEH,IAAI,CAACG,MAFP;AAGNC,IAAAA,GAAG,EAAE,OAAOJ,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACI,GAH3B;AAINE,IAAAA,IAAI,EAAE,OAAON,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACM,IAJ5B;AAKND,IAAAA,CAAC,EAAE,OAAOL,IAAP,GAAcA,IAAI,CAACK,CAAnB,GAAuBL,IAAI,CAACM,IALzB;AAMNC,IAAAA,CAAC,EAAE,OAAOP,IAAP,GAAcA,IAAI,CAACO,CAAnB,GAAuBP,IAAI,CAACI,GANzB;AAONI,IAAAA,KAAK,EAAER,IAAI,CAACQ,KAPN;AAQNC,IAAAA,MAAM,EAAET,IAAI,CAACS;AARP,GAAP;AAUA;;AAED,SAASC,aAAT,GAAyB;AACxB,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8BjB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM;AAAA,OAACI,IAAD;AAAA,OAAOc;AAAP,MAAkBlB,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMmB,GAAG,GAAGlB,WAAW,CAACG,IAAI,IAAI;AAC/Bc,IAAAA,OAAO,CAACd,IAAD,CAAP;AACA,GAFsB,EAEpB,EAFoB,CAAvB;AAIAF,EAAAA,eAAe,CAAC,MAAM;AACrB,QAAIE,IAAJ,EAAU;AACT,YAAMgB,OAAO,GAAG,MACfC,MAAM,CAACC,qBAAP,CAA6B,MAAML,aAAa,CAACd,kBAAkB,CAACC,IAAD,CAAnB,CAAhD,CADD;;AAEAgB,MAAAA,OAAO;;AAEP,UAAIG,WAAJ,EAAiB;AAChBF,QAAAA,MAAM,CAACG,gBAAP,CAAwB,QAAxB,EAAkCJ,OAAlC,EADgB,CAEhB;;AAEA,eAAO,MAAM;AACZC,UAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCL,OAArC,EADY,CAEZ;AACA,SAHD;AAIA;AACD;AACD,GAhBc,EAgBZ,CAAChB,IAAD,CAhBY,CAAf;AAkBA,SAAO,CAACe,GAAD,EAAMH,UAAN,EAAkBZ,IAAlB,CAAP;AACA;;AAED,eAAeW,aAAf","sourcesContent":["import { useState, useCallback, useLayoutEffect } from \"react\";\n// import { DimensionObject, UseDimensionsArgs, UseDimensionsHook } from \"./types\";\n\nfunction getDimensionObject(node) {\n\tconst rect = node.getBoundingClientRect();\n\n\treturn {\n\t\twidth: rect.width,\n\t\theight: rect.height,\n\t\ttop: \"x\" in rect ? rect.x : rect.top,\n\t\tleft: \"y\" in rect ? rect.y : rect.left,\n\t\tx: \"x\" in rect ? rect.x : rect.left,\n\t\ty: \"y\" in rect ? rect.y : rect.top,\n\t\tright: rect.right,\n\t\tbottom: rect.bottom\n\t};\n}\n\nfunction useDimensions() {\n\tconst [dimensions, setDimensions] = useState({});\n\tconst [node, setNode] = useState(null);\n\n\tconst ref = useCallback(node => {\n\t\tsetNode(node);\n\t}, []);\n\n\tuseLayoutEffect(() => {\n\t\tif (node) {\n\t\t\tconst measure = () =>\n\t\t\t\twindow.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n\t\t\tmeasure();\n\n\t\t\tif (liveMeasure) {\n\t\t\t\twindow.addEventListener(\"resize\", measure);\n\t\t\t\t// window.addEventListener(\"scroll\", measure);\n\n\t\t\t\treturn () => {\n\t\t\t\t\twindow.removeEventListener(\"resize\", measure);\n\t\t\t\t\t// window.removeEventListener(\"scroll\", measure);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}, [node]);\n\n\treturn [ref, dimensions, node];\n}\n\nexport default useDimensions;\n"]},"metadata":{},"sourceType":"module"}